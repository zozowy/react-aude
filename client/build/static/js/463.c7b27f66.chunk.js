"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[463],{2122:function(t,e,r){r.d(e,{DI:function(){return d},G3:function(){return p},eI:function(){return l},iM:function(){return s},kW:function(){return k}});var n=r(4925),c=r(4165),a=r(5861),u=["_id"],i="https://restapi.fr/api/recipes";function s(t){return o.apply(this,arguments)}function o(){return(o=(0,a.Z)((0,c.Z)().mark((function t(e){var r,n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(i).concat(e?"?".concat(e):""));case 2:if(!(r=t.sent).ok){t.next=10;break}return t.next=6,r.json();case 6:return n=t.sent,t.abrupt("return",Array.isArray(n)?n:[n]);case 10:throw new Error("Error fetch recipes");case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t){return f.apply(this,arguments)}function f(){return(f=(0,a.Z)((0,c.Z)().mark((function t(e){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(i,"/").concat(e));case 2:if(!(r=t.sent).ok){t.next=7;break}return t.abrupt("return",r.json());case 7:throw new Error("Error fetch getRecipe");case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(t){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(i,"/").concat(e),{method:"DELETE"});case 2:if(!t.sent.ok){t.next=7;break}return t.abrupt("return",e);case 7:throw new Error("Error delete recipe");case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,c.Z)().mark((function t(e){var r,a,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e._id,a=(0,n.Z)(e,u),t.next=3,fetch("".concat(i,"/").concat(r),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:if(!(s=t.sent).ok){t.next=8;break}return t.abrupt("return",s.json());case 8:throw new Error("Error update recipe");case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)((0,c.Z)().mark((function t(e){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(i),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 2:if(!(r=t.sent).ok){t.next=7;break}return t.abrupt("return",r.json());case 7:throw new Error("Error create recipe");case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},6319:function(t,e,r){r.d(e,{D:function(){return f}});var n=r(4165),c=r(3433),a=r(5861),u=r(9439),i=r(2791),s=r(2122),o=r(5330),p=r(277);function f(t){var e=(0,o.useSetRecoilState)(p.IB),r=(0,i.useState)(!0),f=(0,u.Z)(r,2),l=f[0],h=f[1],d=(0,i.useState)([]),x=(0,u.Z)(d,2),k=x[0],w=x[1];return(0,i.useEffect)((function(){var r=!1;function u(){return(u=(0,a.Z)((0,n.Z)().mark((function a(){var u,i;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,h(!0),u=new URLSearchParams,t&&(u.append("limit",18),u.append("skip",18*(t-1)),u.append("sort","createdAt:-1")),n.next=6,(0,s.iM)(u);case 6:i=n.sent,r||e(t&&1!==t?function(t){return[].concat((0,c.Z)(t),(0,c.Z)(i))}:i),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),console.log("ERREUR"),w("Erreur");case 14:return n.prev=14,r||h(!1),n.finish(14);case 17:case"end":return n.stop()}}),a,null,[[0,10,14,17]])})))).apply(this,arguments)}return function(){u.apply(this,arguments)}(),function(){return r=!0}}),[t,e]),[l,k]}},9463:function(t,e,r){r.r(e),r.d(e,{default:function(){return h}});var n=r(4165),c=r(5861),a=r(9439),u=r(6319),i={list:"AdminRecipesList_list__gVlRB"},s=r(2122),o=r(1087),p=r(5330),f=r(277),l=r(184);function h(){(0,u.D)();var t=(0,p.useRecoilState)(f.IB),e=(0,a.Z)(t,2),r=e[0],h=e[1];function d(){return(d=(0,c.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.eI)(e);case 2:h(r.filter((function(t){return t._id!==e})));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,l.jsx)("ul",{className:i.list,children:r.length?r.map((function(t){return(0,l.jsxs)("li",{className:"d-flex align-items-center",children:[(0,l.jsx)("span",{className:"flex-fill",children:t.title}),(0,l.jsx)(o.OL,{to:"../edit/".concat(t._id),children:(0,l.jsx)("button",{className:"btn btn-primary mr-15",children:"Editer"})}),(0,l.jsx)("button",{onClick:function(){return function(t){return d.apply(this,arguments)}(t._id)},className:"btn btn-danger",children:"Supprimer"})]},t._id)})):null})}},277:function(t,e,r){r.d(e,{IB:function(){return n},B0:function(){return o},b5:function(){return s}});var n=(0,r(5330).atom)({key:"recipesState",default:[]}),c=r(4165),a=r(5861),u=r(5330),i=r(2122),s=(0,u.selectorFamily)({key:"selectFilteredRecipes",get:function(t){return function(e){var r=(0,e.get)(n);return r.length&&r.filter((function(e){return e.title.toLowerCase().startsWith(t)}))}}}),o=(0,u.selectorFamily)({key:"selectActiveRecipe",get:function(t){return(0,a.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=5;break}return e.next=4,(0,i.G3)(t);case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))}})}}]);
//# sourceMappingURL=463.c7b27f66.chunk.js.map