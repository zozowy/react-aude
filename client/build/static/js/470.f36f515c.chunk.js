"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[470],{9544:function(e,t,n){n.d(t,{D:function(){return f}});var i=n(4165),r=n(3433),s=n(5861),a=n(9439),c=n(2791),l=n(6764),o=n(5330),u=n(3873);function f(e){var t=(0,o.Zl)(u.IB),n=(0,c.useState)(!0),f=(0,a.Z)(n,2),p=f[0],x=f[1],m=(0,c.useState)(""),d=(0,a.Z)(m,2),h=d[0],g=d[1];return(0,c.useEffect)((function(){var n=!1;function a(){return(a=(0,s.Z)((0,i.Z)().mark((function s(){var a,c;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,x(!0),a=new URLSearchParams,e&&(a.append("limit","".concat(18)),a.append("skip","".concat(18*(e-1))),a.append("sort","createdAt:-1")),i.next=6,(0,l.iM)(a);case 6:c=i.sent,n||t(e&&1!==e?function(e){return[].concat((0,r.Z)(e),(0,r.Z)(c))}:c),i.next=14;break;case 10:i.prev=10,i.t0=i.catch(0),console.log("ERREUR"),g("Erreur");case 14:return i.prev=14,n||x(!1),i.finish(14);case 17:case"end":return i.stop()}}),s,null,[[0,10,14,17]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){n=!0}}),[e,t]),[p,h]}},9470:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var i=n(4165),r=n(5861),s=n(9439),a=n(2791),c="Homepage_grid__7Krgb",l="Homepage_contentCard__nmv7+",o="Homepage_small__pOLGx",u="Homepage_title__3GBMm",f=n(1413),p="Recipe_recipe__sC+LH",x="Recipe_recipeTitle__YvfiK",m="Recipe_imageContainer__CJY22",d=n(184);var h=function(e){var t=e.recipe,n=e.updateRecipe,s=e.deleteRecipe;function a(){return(a=(0,r.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stopPropagation(),s(t._id);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.jsxs)("div",{onClick:function(){n((0,f.Z)((0,f.Z)({},t),{},{liked:!t.liked}))},className:p,children:[(0,d.jsx)("i",{onClick:function(e){return a.apply(this,arguments)},className:"fa-solid fa-xmark"}),(0,d.jsx)("div",{className:m,children:(0,d.jsx)("img",{src:t.image,alt:"recipe"})}),(0,d.jsxs)("div",{className:"".concat(x," d-flex flex-column justify-content-center align-items-center"),children:[(0,d.jsx)("h3",{className:"mb-10",children:t.title}),(0,d.jsx)("i",{className:"fa-solid fa-heart ".concat(t.liked?"text-primary":"")})]})]})},g="Loading_spinner__Y9jaO";var w=function(){return(0,d.jsx)("div",{className:"d-flex flex-row align-items-center justify-content-center flex-fill",children:(0,d.jsx)("i",{className:"fa-solid fa-spinner ".concat(g),children:" "})})},j="Search_searchBar__zrAay";var b=function(e){var t=e.setFilter;return(0,d.jsxs)("div",{className:"d-flex flex-row justify-content-center align-items-center my-30 ".concat(j),children:[(0,d.jsx)("i",{className:"fa-solid fa-magnifying-glass mr-15"}),(0,d.jsx)("input",{onInput:function(e){var n=e.target.value;"undefined"!==n&&n.length>0&&t(n.trim().toLowerCase())},className:"flex-fill ",type:"text",placeholder:"Rechercher"})]})},_=n(9544),v=n(6764),Z=n(5330),y=n(3873),H=[{title:"burger",image:"https://images.unsplash.com/photo-1569691802417-e5e1ec314e81?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=686&q=80"},{title:"Soupe de l\xe9gumes 2",image:"https://images.unsplash.com/photo-1609595781576-1580ff3ee291?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxjb2xsZWN0aW9uLXBhZ2V8MTB8TlR1UHVaTjJaSzR8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=20"},{title:"Soupe de l\xe9gumes 3",image:"https://images.unsplash.com/photo-1681217684376-82f841d33f18?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxM3x8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=400"},{title:"Soupe de l\xe9gumes 4",image:"https://images.unsplash.com/photo-1574484284002-952d92456975?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{title:"Soupe de l\xe9gumes 5",image:"https://images.unsplash.com/photo-1569691802417-e5e1ec314e81?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=686&q=80"},{title:"Soupe de l\xe9gumes 6",image:"https://images.unsplash.com/photo-1574484284002-952d92456975?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{title:"Soupe de l\xe9gumes 7",image:"https://images.unsplash.com/photo-1569691802417-e5e1ec314e81?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=686&q=80"},{title:"Soupe de l\xe9gumes 8",image:"https://images.unsplash.com/photo-1574484284002-952d92456975?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{title:"Soupe de l\xe9gumes 9",image:"https://images.unsplash.com/photo-1569691802417-e5e1ec314e81?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=686&q=80"},{title:"Soupe de l\xe9gumes 10",image:"https://images.unsplash.com/photo-1574484284002-952d92456975?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"}];function M(){return(M=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://restapi.fr/api/recipes",{method:"POST",body:JSON.stringify(H),headers:{"Content-Type":"application/json"}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N={container:"Wishlist_container__bV1Os",whishlist:"Wishlist_whishlist__mKOXs",appear:"Wishlist_appear__Z5IvR",remove:"Wishlist_remove__pl8Mf",disappear:"Wishlist_disappear__iZlLJ"};function B(){var e=(0,Z.Zl)(y.c7),t=(0,Z.sJ)(y.Vo),n=(0,Z.Zl)(y.IB),c=(0,a.useState)(!1),l=(0,s.Z)(c,2),o=l[0],u=l[1];function p(){return(p=(0,r.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.DI)((0,f.Z)((0,f.Z)({},t),{},{liked:!1}));case 2:r=e.sent,n((function(e){return e.map((function(e){return e._id===r._id?r:e}))}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.jsx)("div",{onClick:function(){o||(setTimeout((function(){e(!1)}),200),u(!0))},className:N.container,children:(0,d.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:"".concat(N.whishlist," ").concat(o?N.remove:""),children:[(0,d.jsx)("h4",{children:"Whishlist"}),(0,d.jsx)("ul",{children:t.length?t.map((function(e){return(0,d.jsxs)("li",{className:"d-flex align-items-center mb-10",children:[(0,d.jsx)("span",{className:"flex-fill mr-15",children:e.title}),(0,d.jsx)("button",{onClick:function(){return function(e){return p.apply(this,arguments)}(e)},className:"btn btn-danger",children:(0,d.jsx)("i",{className:"fa-solid fa-trash"})})]},e._id)})):null})]})})}var D=function(){var e=(0,a.useState)(""),t=(0,s.Z)(e,2),n=t[0],f=t[1],p=(0,a.useState)(1),x=(0,s.Z)(p,2),m=x[0],g=x[1],j=(0,_.D)(m),H=(0,s.Z)(j,1)[0],N=(0,Z.sJ)((0,y.b5)(n)),D=(0,Z.Zl)(y.IB),k=(0,Z.sJ)(y.c7);function G(e){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.DI)(t);case 2:n=e.sent,D(N.map((function(e){return e._id===n._id?n:e})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return C.apply(this,arguments)}function C(){return(C=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.eI)(t);case 2:D(N.filter((function(e){return e._id!==t})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex-fill container d-flex flex-column p-20",children:[(0,d.jsxs)("h1",{className:"my-30 ".concat(u),children:["D\xe9couvrez nos nouvelles recettes",(0,d.jsxs)("small",{className:o,children:["( ",N.length," )"]})]}),(0,d.jsxs)("div",{className:"card flex-fill flex-column p-20 mb-20".concat(l),children:[(0,d.jsx)("div",{className:"d-flex flex-row align-items-center justify-content-center p-20",children:(0,d.jsx)("button",{onClick:function(){return function(){return M.apply(this,arguments)}()},className:"btn btn-primary",children:" importer des recettes (2 ou 3 fois si pas de recette... puis actualiser)"})}),(0,d.jsx)(b,{setFilter:f}),H&&!N.length?(0,d.jsx)(w,{}):(0,d.jsx)("div",{className:c,children:Object.values(N).filter((function(e){return e.title.toLowerCase().startsWith(n)})).map((function(e){return(0,d.jsx)(h,{recipe:e,updateRecipe:G,deleteRecipe:W},e._id)}))}),(0,d.jsx)("div",{className:"d-flex flex-row align-items-center justify-content-center p-20",children:(0,d.jsxs)("button",{onClick:function(){return g(m+1)},className:"btn btn-primary",children:[" Charger plus de recettes page n\xb0 ",m]})})]})]}),k&&(0,d.jsx)(B,{})]})}}}]);
//# sourceMappingURL=470.f36f515c.chunk.js.map