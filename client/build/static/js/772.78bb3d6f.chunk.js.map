{"version":3,"file":"static/js/772.78bb3d6f.chunk.js","mappings":"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","sources":["apis/recipe.js","webpack://client/./src/pages/Admin/pages/AdminRecipes/pages/AdminRecipesForm/AdminRecipeForm.module.scss?947c","pages/Admin/pages/AdminRecipes/pages/AdminRecipesForm/AdminRecipesForm.js","state/atoms.js","state/selectors.js"],"sourcesContent":["const RECIPE_API = 'https://restapi.fr/api/recipes';\nexport async function getRecipes(queryParam) {\n    const response = await fetch(`${RECIPE_API}${queryParam ? `?${queryParam}` : ''}`);\n    if (response.ok) {\n        const body = await response.json();\n        return Array.isArray(body) ? body : [body];\n    } else {\n        throw new Error('Error fetch recipes')\n    }\n}\nexport async function getRecipe(_id) {\n    const response = await fetch(`${RECIPE_API}/${_id}`);\n    if (response.ok) {\n        return response.json();\n    } else {\n        throw new Error('Error fetch getRecipe')\n    }\n}\nexport async function deleteRecipe(_id) {\n    const response = await fetch(`${RECIPE_API}/${_id}`, {\n        method: 'DELETE',\n    });\n    if (response.ok) {\n        return _id;\n    } else {\n        throw new Error('Error delete recipe');\n    }\n\n}\nexport async function updateRecipe(updatedRecipe) {\n\n    const { _id, ...restRecipe } = updatedRecipe\n    const response = await fetch(`${RECIPE_API}/${_id}`, {\n        method: 'PATCH',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(restRecipe)\n    });\n    if (response.ok) {\n        return response.json();\n    } else {\n        throw new Error('Error update recipe')\n    }\n}\n\nexport async function createRecipe(newRecipe) { \n    const response = await fetch(`${RECIPE_API}`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newRecipe)\n    });\n    if (response.ok) {\n        return response.json();\n    } else {\n        throw new Error('Error create recipe')\n    }\n}","// extracted by mini-css-extract-plugin\nexport default {\"RecipeForm\":\"AdminRecipeForm_RecipeForm__c2lMI\"};","\nimport styles from './AdminRecipeForm.module.scss';\nimport * as yup from 'yup';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { createRecipe, updateRecipe } from 'apis';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useRecoilValue } from 'recoil';\nimport { selectActiveRecipe } from 'state';\n\n\n\nfunction AdminRecipesForm () {\n\t//const recipe = useLoaderData();\n    const { recipeId } = useParams();\n    const recipe = useRecoilValue(selectActiveRecipe(recipeId));\n\tconst navigate = useNavigate();\n    const defaultValues = {\n        title: recipe ?  recipe.title : '',\n        image: recipe ?  recipe.image : ''\n    }\n\n    const recipeSchema = yup.object({\n            title: yup.string().required('le titre de la recette doit être renseigné').min(10, 'Le titre doit faire 10 caractères min et 30 max').max(30, 'Le titre doit faire 10 caractères min et 30 max'),\n            image: yup.string().required('il faut renseigner une url d\\'image').url('L\\'image doit être un lien valide')\n        })\n    const {\n        formState: { errors, isSubmitting},\n        register,\n        handleSubmit,\n        reset,\n        setError,\n        clearErrors,\n    } = useForm( {\n        defaultValues,\n        resolver: yupResolver(recipeSchema),\n    });\n\n    async function submit(values) {\n        try {\n            clearErrors();\n\t\t\tif (recipe) {\n\t\t\t\tawait updateRecipe({...values, _id: recipe._id });\n\t\t\t\tnavigate('/admin/recipes/list');\n\t\t\t} else {\n\t\t\t\tawait createRecipe(values);\n\t\t\t\treset(defaultValues);\n\t\t\t}\n            } catch (error) {\n\t\t\t\tsetError('generic', { type: 'generic', message: 'un erreur est survenue'})\n            }\n    }\n    return (\n        <form onSubmit={handleSubmit(submit)}\n            className={`d-flex flex-column card p-20 ${ styles.RecipeForm}`} >\n            <h2 className='mb-20' > Ajouter une recette</h2>\n            <div className='d-flex flex-column mb-20'>\n                <label >Titre de la recette</label>\n                <input {...register('title')} type='text'/>\n                { errors.title && <p className='form-error'>{ errors.title.message }</p>}\n            </div>\n            <div className='d-flex flex-column mb-20'>\n                <label>Image de la recette</label>\n                <input {...register('image')} type='text'/>\n                { errors.image && <p className='form-error'>{ errors.image.message }</p>}\n            </div>\n            { errors.generic && <p className='form-error'>{ errors.generic.message }</p>}\n            <div>\n                <button disabled={isSubmitting} className='btn btn-primary'> Sauvegarder</button>\n            </div>\n        </form>\n    )\n}\nexport default AdminRecipesForm;","const { atom } = require('recoil');\n\nexport const recipesState = atom({\n  key: 'recipesState',\n  default: [],\n});","import { selector, selectorFamily } from 'recoil';\nimport { recipesState } from './atoms';\nimport { getRecipe } from 'apis';\n\nexport const selectFilteredRecipes = selectorFamily({\n  key: 'selectFilteredRecipes',\n  get:\n    (filter) =>\n    ({ get }) => {\n      const recipes = get(recipesState);\n      return (\n        recipes.length &&\n        recipes.filter((r) => r.title.toLowerCase().startsWith(filter))\n      );\n    },\n});\n\nexport const selectActiveRecipe = selectorFamily({\n    key: 'selectActiveRecipe',\n    get:  recipeId => async () => recipeId && (await(getRecipe(recipeId))),\n})"],"names":["RECIPE_API","getRecipes","_x","_getRecipes","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","queryParam","response","body","wrap","_context","prev","next","fetch","concat","sent","ok","json","abrupt","Array","isArray","Error","stop","getRecipe","_x2","_getRecipe","_callee2","_id","_context2","deleteRecipe","_x3","_deleteRecipe","_callee3","_context3","method","updateRecipe","_x4","_updateRecipe","_callee4","updatedRecipe","restRecipe","_context4","_objectWithoutProperties","_excluded","headers","JSON","stringify","createRecipe","_x5","_createRecipe","_callee5","newRecipe","_context5","recipeId","useParams","recipe","useRecoilValue","selectActiveRecipe","navigate","useNavigate","defaultValues","title","image","recipeSchema","yup","required","min","max","url","_useForm","useForm","resolver","yupResolver","_useForm$formState","formState","errors","isSubmitting","register","handleSubmit","reset","setError","clearErrors","_submit","values","_objectSpread","t0","type","message","_jsxs","onSubmit","className","styles","children","_jsx","generic","disabled","recipesState","atom","require","key","default","selectFilteredRecipes","selectorFamily","get","filter","_ref","recipes","length","r","toLowerCase","startsWith"],"sourceRoot":""}