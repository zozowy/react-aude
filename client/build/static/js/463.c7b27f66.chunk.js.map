{"version":3,"file":"static/js/463.c7b27f66.chunk.js","mappings":"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","sources":["apis/recipe.js","hooks/useFetchRecipes.js","webpack://client/./src/pages/Admin/pages/AdminRecipes/pages/AdminRecipesList/AdminRecipesList.module.scss?6983","pages/Admin/pages/AdminRecipes/pages/AdminRecipesList/AdminRecipesList.js","state/atoms.js","state/selectors.js"],"sourcesContent":["const RECIPE_API = 'https://restapi.fr/api/recipes';\nexport async function getRecipes(queryParam) {\n    const response = await fetch(`${RECIPE_API}${queryParam ? `?${queryParam}` : ''}`);\n    if (response.ok) {\n        const body = await response.json();\n        return Array.isArray(body) ? body : [body];\n    } else {\n        throw new Error('Error fetch recipes')\n    }\n}\nexport async function getRecipe(_id) {\n    const response = await fetch(`${RECIPE_API}/${_id}`);\n    if (response.ok) {\n        return response.json();\n    } else {\n        throw new Error('Error fetch getRecipe')\n    }\n}\nexport async function deleteRecipe(_id) {\n    const response = await fetch(`${RECIPE_API}/${_id}`, {\n        method: 'DELETE',\n    });\n    if (response.ok) {\n        return _id;\n    } else {\n        throw new Error('Error delete recipe');\n    }\n\n}\nexport async function updateRecipe(updatedRecipe) {\n\n    const { _id, ...restRecipe } = updatedRecipe\n    const response = await fetch(`${RECIPE_API}/${_id}`, {\n        method: 'PATCH',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(restRecipe)\n    });\n    if (response.ok) {\n        return response.json();\n    } else {\n        throw new Error('Error update recipe')\n    }\n}\n\nexport async function createRecipe(newRecipe) { \n    const response = await fetch(`${RECIPE_API}`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newRecipe)\n    });\n    if (response.ok) {\n        return response.json();\n    } else {\n        throw new Error('Error create recipe')\n    }\n}","import { useEffect, useState } from \"react\";\nimport { getRecipes } from \"../apis\";\nimport { useSetRecoilState } from \"recoil\";\nimport { recipesState } from \"state\";\n\n\nexport function useFetchRecipes(page) {\n   // const [recipes, setRecipes] = useState([]);\n    const setRecipes = useSetRecoilState(recipesState);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState([]);\n\n    useEffect(() => {\n        let cancel = false;\n        async function fetchData() {\n            try {\n                setIsLoading(true);\n\n                const queryParam = new URLSearchParams();\n                if (page) {\n                    \n                    queryParam.append('limit', 18);\n                    queryParam.append('skip', (page - 1) * 18);\n                    queryParam.append('sort', 'createdAt:-1');\n                }\n                const fetchedRecipes = await getRecipes(queryParam);\n                if (!cancel) {\n                    if (page && page !== 1) {\n                        setRecipes(x => [...x, ...fetchedRecipes]);\n                    } else {\n                        setRecipes(fetchedRecipes);\n                    }\n                }\n               // setRecipes(fetchRecipes)\n            } catch (e) {\n                console.log('ERREUR');\n                setError('Erreur');\n            } finally {\n                if (!cancel) {\n                    setIsLoading(false);\n                }\n\n            }\n        }\n        fetchData();\n        return () => cancel = true;\n    }, [page, setRecipes]);\n    return [isLoading, error];\n\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"AdminRecipesList_list__gVlRB\"};","import { useFetchRecipes } from \"hooks\";\nimport styles from \"./AdminRecipesList.module.scss\";\nimport { deleteRecipe as deleteR } from 'apis';\nimport { NavLink } from \"react-router-dom\";\nimport { useRecoilState } from \"recoil\";\nimport { recipesState } from 'state';\n\nexport default function AdminRecipesList() {\n    useFetchRecipes();\n    const [recipes,  setRecipes] = useRecoilState(recipesState);\n\n    async function deleteRecipe(_id) {\n        await deleteR(_id);\n        setRecipes(recipes.filter((r) => r._id !== _id));\n    }\n    return (\n        <ul className={styles.list}>\n            { recipes.length ? recipes.map( r => (\n                <li key={ r._id} className=\"d-flex align-items-center\">\n                    <span className=\"flex-fill\">\n                        {r.title}\n                    </span>\n                    <NavLink to={`../edit/${r._id}`}>\n                        <button className=\"btn btn-primary mr-15\">Editer</button>\n                    </NavLink> \n                    <button onClick={ () => deleteRecipe(r._id)} className=\"btn btn-danger\">Supprimer</button>\n                </li>\n                )) : null }\n        </ul>\n    );\n}","const { atom } = require('recoil');\n\nexport const recipesState = atom({\n  key: 'recipesState',\n  default: [],\n});","import { selector, selectorFamily } from 'recoil';\nimport { recipesState } from './atoms';\nimport { getRecipe } from 'apis';\n\nexport const selectFilteredRecipes = selectorFamily({\n  key: 'selectFilteredRecipes',\n  get:\n    (filter) =>\n    ({ get }) => {\n      const recipes = get(recipesState);\n      return (\n        recipes.length &&\n        recipes.filter((r) => r.title.toLowerCase().startsWith(filter))\n      );\n    },\n});\n\nexport const selectActiveRecipe = selectorFamily({\n    key: 'selectActiveRecipe',\n    get:  recipeId => async () => recipeId && (await(getRecipe(recipeId))),\n})"],"names":["RECIPE_API","getRecipes","_x","_getRecipes","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","queryParam","response","body","wrap","_context","prev","next","fetch","concat","sent","ok","json","abrupt","Array","isArray","Error","stop","getRecipe","_x2","_getRecipe","_callee2","_id","_context2","deleteRecipe","_x3","_deleteRecipe","_callee3","_context3","method","updateRecipe","_x4","_updateRecipe","_callee4","updatedRecipe","restRecipe","_context4","_objectWithoutProperties","_excluded","headers","JSON","stringify","createRecipe","_x5","_createRecipe","_callee5","newRecipe","_context5","useFetchRecipes","page","setRecipes","useSetRecoilState","recipesState","_useState","useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","error","setError","useEffect","cancel","_fetchData","fetchedRecipes","URLSearchParams","append","x","_toConsumableArray","t0","console","log","finish","fetchData","AdminRecipesList","_useRecoilState","useRecoilState","_useRecoilState2","recipes","deleteR","filter","r","_jsx","className","styles","children","length","map","_jsxs","title","NavLink","to","onClick","atom","require","key","default","selectFilteredRecipes","selectorFamily","get","_ref","toLowerCase","startsWith","selectActiveRecipe","recipeId"],"sourceRoot":""}