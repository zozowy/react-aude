{"version":3,"file":"static/js/822.dd62ecbe.chunk.js","mappings":"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","sources":["hooks/useFetchRecipes.tsx","webpack://client/./src/pages/Admin/pages/AdminRecipes/pages/AdminRecipesList/AdminRecipesList.module.scss?6983","pages/Admin/pages/AdminRecipes/pages/AdminRecipesList/AdminRecipesList.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { getRecipes } from \"../apis\";\nimport { useSetRecoilState } from \"recoil\";\nimport { recipesState } from \"state\";\n\n\nexport function useFetchRecipes(page?: number):[boolean, string] {\n   // const [recipes, setRecipes] = useState([]);\n    const setRecipes = useSetRecoilState(recipesState);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState('');\n\n    useEffect(() => {\n        let cancel = false;\n        async function fetchData() {\n            try {\n                setIsLoading(true);\n\n                const queryParam = new URLSearchParams();\n                if (page) {\n\n                    queryParam.append('limit', `${18}`);\n                    queryParam.append('skip', `${(page - 1) * 18}`);\n                    queryParam.append('sort', 'createdAt:-1');\n                }\n                const fetchedRecipes = await getRecipes(queryParam);\n                if (!cancel) {\n                    if (page && page !== 1) {\n                        setRecipes(x => [...x, ...fetchedRecipes]);\n                    } else {\n                        setRecipes(fetchedRecipes);\n                    }\n                }\n               // setRecipes(fetchRecipes)\n            } catch (e) {\n                console.log('ERREUR');\n                setError('Erreur');\n            } finally {\n                if (!cancel) {\n                    setIsLoading(false);\n                }\n\n            }\n        }\n        fetchData();\n        return () => {\n            cancel = true\n        };\n    }, [page, setRecipes]);\n    return [isLoading, error];\n\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"AdminRecipesList_list__gVlRB\",\"li\":\"AdminRecipesList_li__VVQYf\"};","import { useFetchRecipes } from \"hooks\";\nimport styles from \"./AdminRecipesList.module.scss\";\nimport { deleteRecipe as deleteR } from 'apis';\nimport { NavLink } from \"react-router-dom\";\nimport { useRecoilState } from \"recoil\";\nimport { recipesState } from 'state';\nimport { ObjectId } from \"types\";\n\nexport default function AdminRecipesList() {\n    useFetchRecipes();\n    const [recipes,  setRecipes] = useRecoilState(recipesState);\n\n    async function deleteRecipe(_id: ObjectId) {\n        await deleteR(_id);\n        setRecipes(recipes.filter((r) => r._id !== _id));\n    }\n    return (\n        <ul className={styles.list}>\n            { recipes.length ? recipes.map( r => (\n                <li key={ r._id} className={ `d-flex align-items-center ${styles.li}`}>\n                    <span className=\"flex-fill\">\n                        {r.title}\n                    </span>\n                    <NavLink to={`../edit/${r._id}`}>\n                        <button className=\"btn btn-primary mr-15\">Editer</button>\n                    </NavLink> \n                    <button onClick={ () => deleteRecipe(r._id)} className=\"btn btn-danger\">Supprimer</button>\n                </li>\n                )) : null }\n        </ul>\n    );\n}"],"names":["useFetchRecipes","page","setRecipes","useSetRecoilState","recipesState","_useState","useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","error","setError","useEffect","cancel","_fetchData","_asyncToGenerator","_regeneratorRuntime","mark","_callee","queryParam","fetchedRecipes","wrap","_context","prev","next","URLSearchParams","append","concat","getRecipes","sent","x","_toConsumableArray","t0","console","log","finish","stop","apply","arguments","fetchData","AdminRecipesList","_useRecoilState","useRecoilState","_useRecoilState2","recipes","_deleteRecipe","_id","deleteR","filter","r","_jsx","className","styles","children","length","map","_jsxs","title","NavLink","to","onClick","_x","deleteRecipe"],"sourceRoot":""}