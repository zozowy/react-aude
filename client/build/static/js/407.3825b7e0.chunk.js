"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[407],{2122:function(e,t,r){r.d(t,{DI:function(){return d},G3:function(){return f},eI:function(){return l},iM:function(){return o},kW:function(){return m}});var n=r(4925),i=r(4165),a=r(5861),c=["_id"],s="https://restapi.fr/api/recipes";function o(e){return u.apply(this,arguments)}function u(){return(u=(0,a.Z)((0,i.Z)().mark((function e(t){var r,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s).concat(t?"?".concat(t):""));case 2:if(!(r=e.sent).ok){e.next=10;break}return e.next=6,r.json();case 6:return n=e.sent,e.abrupt("return",Array.isArray(n)?n:[n]);case 10:throw new Error("Error fetch recipes");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=(0,a.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/").concat(t));case 2:if(!(r=e.sent).ok){e.next=7;break}return e.abrupt("return",r.json());case 7:throw new Error("Error fetch getRecipe");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/").concat(t),{method:"DELETE"});case 2:if(!e.sent.ok){e.next=7;break}return e.abrupt("return",t);case 7:throw new Error("Error delete recipe");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)((0,i.Z)().mark((function e(t){var r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,a=(0,n.Z)(t,c),e.next=3,fetch("".concat(s,"/").concat(r),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:if(!(o=e.sent).ok){e.next=8;break}return e.abrupt("return",o.json());case 8:throw new Error("Error update recipe");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if(!(r=e.sent).ok){e.next=7;break}return e.abrupt("return",r.json());case 7:throw new Error("Error create recipe");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},6319:function(e,t,r){r.d(t,{D:function(){return p}});var n=r(4165),i=r(3433),a=r(5861),c=r(9439),s=r(2791),o=r(2122),u=r(5330),f=r(277);function p(e){var t=(0,u.useSetRecoilState)(f.IB),r=(0,s.useState)(!0),p=(0,c.Z)(r,2),l=p[0],x=p[1],d=(0,s.useState)([]),h=(0,c.Z)(d,2),m=h[0],w=h[1];return(0,s.useEffect)((function(){var r=!1;function c(){return(c=(0,a.Z)((0,n.Z)().mark((function a(){var c,s;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,x(!0),c=new URLSearchParams,e&&(c.append("limit",18),c.append("skip",18*(e-1)),c.append("sort","createdAt:-1")),n.next=6,(0,o.iM)(c);case 6:s=n.sent,r||t(e&&1!==e?function(e){return[].concat((0,i.Z)(e),(0,i.Z)(s))}:s),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),console.log("ERREUR"),w("Erreur");case 14:return n.prev=14,r||x(!1),n.finish(14);case 17:case"end":return n.stop()}}),a,null,[[0,10,14,17]])})))).apply(this,arguments)}return function(){c.apply(this,arguments)}(),function(){return r=!0}}),[e,t]),[l,m]}},3407:function(e,t,r){r.r(t),r.d(t,{default:function(){return M}});var n=r(4165),i=r(5861),a=r(9439),c=r(2791),s="Homepage_grid__7Krgb",o="Homepage_contentCard__nmv7+",u="Homepage_small__pOLGx",f=r(1413),p="Recipe_recipe__sC+LH",l="Recipe_recipeTitle__YvfiK",x="Recipe_imageContainer__CJY22",d=r(184);var h=function(e){var t=e.recipe,r=e.updateRecipe,a=e.deleteRecipe;function c(){return(c=(0,i.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.stopPropagation(),a(t._id);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.jsxs)("div",{onClick:function(){r((0,f.Z)((0,f.Z)({},t),{},{liked:!t.liked}))},className:p,children:[(0,d.jsx)("i",{onClick:function(e){return c.apply(this,arguments)},className:"fa-solid fa-xmark"}),(0,d.jsx)("div",{className:x,children:(0,d.jsx)("img",{src:t.image,alt:"recipe"})}),(0,d.jsxs)("div",{className:"".concat(l," d-flex flex-column justify-content-center align-items-center"),children:[(0,d.jsx)("h3",{className:"mb-10",children:t.title}),(0,d.jsx)("i",{className:"fa-solid fa-heart ".concat(t.liked?"text-primary":"")})]})]})},m="Loading_spinner__Y9jaO";var w=function(){return(0,d.jsx)("div",{className:"d-flex flex-row align-items-center justify-content-center flex-fill",children:(0,d.jsx)("i",{className:"fa-solid fa-spinner ".concat(m),children:" "})})},g="Search_searchBar__zrAay";var b=function(e){var t=e.setFilter;return(0,d.jsxs)("div",{className:"d-flex flex-row justify-content-center align-items-center my-30 ".concat(g),children:[(0,d.jsx)("i",{className:"fa-solid fa-magnifying-glass mr-15"}),(0,d.jsx)("input",{onInput:function(e){var r=e.target.value;"undefined"!==r&&r.length>0&&t(r.trim().toLowerCase())},className:"flex-fill ",type:"text",placeholder:"Rechercher"})]})},y=r(6319),v=r(2122),j=r(5330),Z=r(277),k=[{title:"burger",image:"https://images.unsplash.com/photo-1569691802417-e5e1ec314e81?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=686&q=80"},{title:"Soupe de l\xe9gumes 2",image:"https://images.unsplash.com/photo-1609595781576-1580ff3ee291?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxjb2xsZWN0aW9uLXBhZ2V8MTB8TlR1UHVaTjJaSzR8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=20"},{title:"Soupe de l\xe9gumes 3",image:"https://images.unsplash.com/photo-1681217684376-82f841d33f18?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxM3x8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=400"},{title:"Soupe de l\xe9gumes 4",image:"https://images.unsplash.com/photo-1574484284002-952d92456975?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{title:"Soupe de l\xe9gumes 5",image:"https://images.unsplash.com/photo-1569691802417-e5e1ec314e81?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=686&q=80"},{title:"Soupe de l\xe9gumes 6",image:"https://images.unsplash.com/photo-1574484284002-952d92456975?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{title:"Soupe de l\xe9gumes 7",image:"https://images.unsplash.com/photo-1569691802417-e5e1ec314e81?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=686&q=80"},{title:"Soupe de l\xe9gumes 8",image:"https://images.unsplash.com/photo-1574484284002-952d92456975?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{title:"Soupe de l\xe9gumes 9",image:"https://images.unsplash.com/photo-1569691802417-e5e1ec314e81?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=686&q=80"},{title:"Soupe de l\xe9gumes 10",image:"https://images.unsplash.com/photo-1574484284002-952d92456975?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"}];function H(){return(H=(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://restapi.fr/api/recipes",{method:"POST",body:JSON.stringify(k),headers:{"Content-Type":"application/json"}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(){var e=(0,c.useState)(""),t=(0,a.Z)(e,2),r=t[0],f=t[1],p=(0,c.useState)(1),l=(0,a.Z)(p,2),x=l[0],m=l[1],g=(0,y.D)(x),k=(0,a.Z)(g,1)[0],M=(0,j.useRecoilValue)((0,Z.b5)(r)),_=(0,j.useSetRecoilState)(Z.IB);function B(e){return D.apply(this,arguments)}function D(){return(D=(0,i.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.DI)(t);case 2:r=e.sent,_(M.map((function(e){return e._id===r._id?r:e})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return N.apply(this,arguments)}function N(){return(N=(0,i.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.eI)(t);case 2:_(M.filter((function(e){return e._id!==t})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.jsxs)("div",{className:"flex-fill container d-flex flex-column p-20",children:[(0,d.jsxs)("h1",{className:"my-30",children:["D\xe9couvrez nos nouvelles recettes",(0,d.jsxs)("small",{className:u,children:["( ",M.length," )"]})]}),(0,d.jsxs)("div",{className:"card flex-fill flex-column p-20 mb-20".concat(o),children:[(0,d.jsx)("div",{className:"d-flex flex-row align-items-center justify-content-center p-20",children:(0,d.jsx)("button",{onClick:function(){return function(){return H.apply(this,arguments)}()},className:"btn btn-primary",children:" importer des recettes (2 ou 3 fois si pas de recette... puis actualiser)"})}),(0,d.jsx)(b,{setFilter:f}),k&&!M.length?(0,d.jsx)(w,{}):(0,d.jsx)("div",{className:s,children:Object.values(M).filter((function(e){return e.title.toLowerCase().startsWith(r)})).map((function(e){return(0,d.jsx)(h,{recipe:e,updateRecipe:B,deleteRecipe:S},e._id)}))}),(0,d.jsx)("div",{className:"d-flex flex-row align-items-center justify-content-center p-20",children:(0,d.jsxs)("button",{onClick:function(){return m(x+1)},className:"btn btn-primary",children:[" Charger plus de recettes page n\xb0 ",x]})})]})]})}},277:function(e,t,r){r.d(t,{IB:function(){return n},B0:function(){return u},b5:function(){return o}});var n=(0,r(5330).atom)({key:"recipesState",default:[]}),i=r(4165),a=r(5861),c=r(5330),s=r(2122),o=(0,c.selectorFamily)({key:"selectFilteredRecipes",get:function(e){return function(t){var r=(0,t.get)(n);return r.length&&r.filter((function(t){return t.title.toLowerCase().startsWith(e)}))}}}),u=(0,c.selectorFamily)({key:"selectActiveRecipe",get:function(e){return(0,a.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,!t.t0){t.next=5;break}return t.next=4,(0,s.G3)(e);case 4:t.t0=t.sent;case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t)})))}})}}]);
//# sourceMappingURL=407.3825b7e0.chunk.js.map